<source>
  @type tail
  path fluentd/etc/upbit__data_BTC.log
  pos_file fluentd/etc/upbit_connect.log.pos
  tag upbit.logs
  <parse>
    @type regexp
    expression /^(?<time>\d{4}-\d{2}-\d{2} \d{2}:\d{2}:\d{2},\d{3}) - (?<logger>[^ ]*) - (?<log_level>[^ ]*) - (?<message>.*)$/
    time_key time
    time_format %Y-%m-%d %H:%M:%S,%L
  </parse>
</source>


<source>
  @type tail
  path fluentd/etc/bithumb__data_BTC.log
  pos_file fluentd/etc/bithumb__data_BTC.log.pos
  tag bithumb.logs
  <parse>
    @type regexp
    expression /^(?<time>\d{4}-\d{2}-\d{2} \d{2}:\d{2}:\d{2}),(?<microseconds>\d{3}) - (?<logger>[^ ]*) - (?<log_level>[^ ]*) - (?<message>.*)$/
    time_key time
    time_format %Y-%m-%d %H:%M:%S
    keep_time_key true
  </parse>
</source>


<source>
  @type tail
  path fluentd/etc/korbit__data_BTC.log
  pos_file fluentd/etc/korbit__data_BTC.log.pos
  tag korbit.logs
  <parse>
    @type regexp
    expression /^(?<time>\d{4}-\d{2}-\d{2} \d{2}:\d{2}:\d{2},\d{3}) - (?<logger>[^ ]*) - (?<log_level>[^ ]*) - (?<message>.*)$/
    time_key time
    time_format %Y-%m-%d %H:%M:%S,%L
  </parse>
</source>



<match upbit.logs>
  @type kafka
  brokers kafka1:19092,kafka2:29092,kafka3:39092
  default_topic btcSocketDataInUpbit
</match>

<match bithumb.logs>
  @type kafka
  brokers kafka1:19092,kafka2:29092,kafka3:39092
  default_topic btcSocketDataInBithumb
</match>

<match korbit.logs>
  @type kafka
  brokers kafka1:19092,kafka2:29092,kafka3:39092
  default_topic btcSocketDataInKorbit
</match>
